<% provide :page_title, 'Question with Answers'%>
<% currently_at 'Questions' %>

<h1 class="mb-4">Show question</h1>

<article class="card mb-3 mt-3">
  <div class="card-body">

    <h4><%= @question.title %></h2>
  
    <section class="card-text">
      <time datetime="<%= @question.formated_created_at %>">
        <small><%= @question.formated_created_at %></small>
      </time>
      <p class="my-2">
        <%= @question.body %>
      </p>
    </section>

    <%= link_to 'Back', questions_path(@question), class: 'btn btn-warning' %> 
    <%= link_to 'Edit', edit_question_path(@question), class: 'btn btn-secondary' %>
    <%= link_to 'Destroy', question_path(@question), class: 'btn btn-danger',
     data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'} %>
  </div>
</article>


<h2 class = 'mb-3 mt-5'>Write your answer</h2> 

<%= render 'answers/form'%>

<h2 class = 'mb-3 mt-5'>Answers for this question</h2>

<% @answers.each do |answer|%>
  <article class = 'card text-white bg-secondary mb-3'>
    <div class = 'card-body'>
      <section class = 'card-text'>
        <time datetime="<%= answer.formated_created_at %>">
          <small><%= answer.formated_created_at %></small>
        </time>
        <p class = 'my-2'>
          <%= answer.body%>
        </p>
      </section>
      <%= link_to 'Delete', question_answer_path(@question, answer), data:{turbo_method: :delete, turbo_confirm:'Are you sure?'}, class: 'btn btn-danger btn-sm'%>
      <%= link_to 'Edit', edit_question_answer_path(@question, answer), class: 'btn btn-warning btn-sm'%>
    </div>
  </article>
<% end %>


